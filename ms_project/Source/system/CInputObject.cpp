//=============================================================================
//
// DirectX入力オブジェクトクラス
// Author : Ryo Kobayashi
//
//=============================================================================

//*****************************************************************************
// インクルードファイル
//*****************************************************************************
#include "CInputObject.h"
#include "common.h"
#include "DebugUtil.h"

//=============================================================================
// コンストラクタ
//=============================================================================
CInputObject::CInputObject()
    : m_pDInput(nullptr)
{
}

//=============================================================================
// デストラクタ
//=============================================================================
CInputObject::~CInputObject()
{
    SafeRelease(m_pDInput);
}

//=============================================================================
// 生成処理
//=============================================================================
CInputObject* CInputObject::Create()
{
    CInputObject* pObj = new CInputObject();

    if(pObj)
    {
        INIT_CHECK(pObj->Init());
        _PrintConsole("入力オブジェクト\n");
    }

    return pObj;
}

//=============================================================================
// 開放
//=============================================================================
void CInputObject::Release(void)
{
    delete this;
}

//=============================================================================
// DirectInput取得
//=============================================================================
LPDIRECTINPUT8 CInputObject::GetDInput() const
{
    return m_pDInput;
}

//=============================================================================
// 初期化
//=============================================================================
HRESULT CInputObject::Init()
{
    // 変数宣言
    HRESULT hr;    // 結果格納用
    // DirectInputオブジェクトの作成
    hr = DirectInput8Create(GetModuleHandle(nullptr),
                        DIRECTINPUT_VERSION,
                        IID_IDirectInput8,
                        (void**)&m_pDInput,
                        nullptr);
    _Assert(SUCCEEDED(hr));

    return hr;
}

// EOF
